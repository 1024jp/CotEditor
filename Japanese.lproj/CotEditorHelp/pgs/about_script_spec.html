<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="keywords" content="スクリプトメニュー,スクリプト"><link rel="start" href="../CotEditorHelp.html"><link rel="index" href="../xpgs/xall.html"><link rel="stylesheet" href="../sty/standard.css" type="text/css"><title>UNIX スクリプトとの連携</title></head><body><div id="navbar"><div id="home"><a href="../CotEditorHelp.html" rel="start">CotEditor ヘルプ</a></div><div id="index"><a href="../xpgs/xall.html" rel="index">索引</a></div></div><div id="contents"><h1><img src="../gfx/icon32.png" alt="" width="32" height="32" id="h1icon">UNIX スクリプトとの連携</h1><p>このページではスクリプトメニューから実行する UNIX スクリプトに CotEditor で編集中の書類の情報やテキストを渡したり、スクリプトの実行結果を書類に反映する方法を説明します。</p><ul><li>スクリプトメニューに登録できるスクリプトの拡張子は .sh .pl .php .rb .py です（言語は関係ありません）。</li><li>スクリプトには実行権限がなければなりません。スクリプトに実行権限を付与するには、ターミナルを使用するか、または「Extras」フォルダに同梱の「chmod-755.app」をお使いください。</li><li>スクリプト内の行末コード（改行コード）は LF でなければなりません。</li></ul><h2>スクリプトにテキストを渡す</h2><p>スクリプトに CotEditor からデータを渡すには、スクリプトの冒頭にコメントを置き、固定文字列「<code>%%%{CotEditorXInput=xxxx}%%%</code>」を埋め込みます。「<code>xxxx</code>」で、受け渡すデータを指定します。</p><table><tr><th class="lh"><code>Selection</code></th><td>現在選択しているテキスト</td></tr><tr><th class="lh"><code>AllText</code></th><td>書類のすべてのテキスト</td></tr><tr><th class="lh"><code>None</code></th><td>何も渡さない（デフォルト）</td></tr></table><ul style="margin-top: 1em;"><li>コメントを記述しなかった場合、「None」となります。</li><li>CotEditor からのテキストは標準入力に渡されます。</li><li>スクリプトに渡されるテキストの文字エンコーディングは UTF-8 です。</li></ul><h2>スクリプトの出力を受け取る</h2><p>CotEditor でスクリプトの出力を受け取るには、スクリプトの冒頭にコメントを置き、固定文字列「<code>%%%{CotEditorXOutput=xxxx}%%%</code>」を埋め込みます。「<code>xxxx</code>」で、受け取った後の処理を指定します。</p><table><tr><th class="lh"><code>ReplaceSelection</code></th><td>現在選択しているテキストを出力内容で置き換えます。</td></tr><tr><th class="lh"><code>ReplaceAllText</code></th><td>書類のすべてのテキストを出力内容で置き換えます。</td></tr><tr><th class="lh"><code>InsertAfterSelection</code></th><td>選択範囲の直後に出力内容を挿入します。</td></tr><tr><th class="lh"><code>AppendToAllText</code></th><td>書類の末尾に出力内容を挿入します。</td></tr><tr><th class="lh"><code>Pasteboard puts</code></th><td>クリップボードに出力内容を格納します。</td></tr><tr><th class="lh"><code>Discard</code></th><td>何もしない（デフォルト）</td></tr></table><ul style="margin-top: 1em;"><li>コメントを記述しなかった場合、「Discard」となります。</li><li>CotEditor に渡すテキストは、標準出力としてください。。</li><li>CotEditor に返すテキストの文字エンコーディングは UTF-8 でなければなりません。</li></ul><h2 id="P0">関連項目</h2><ul class="rel_items">  <li><a href="../pgs/howto_customize_scriptmenu.html" class="wikipage">スクリプトメニューをカスタマイズする</a></li>  <li><a href="../pgs/about_applescript.html" class="wikipage">AppleScript との連携</a></li>  <li><a href="../pgs/about_script_name.html" class="wikipage">CotEditor スクリプトのファイル名規則</a></li></ul></div></body></html>