
changelog
==========================

1.6
--------------------------

### new

- テーマ機能
- コメントアウト/コメント解除機能
- シンタックスカラーリングに新しいキーワード “カテゴリ”, “変数” を追加
- シンタックス定義にファイル名の設定を追加
    - この仕様変更にともない、“Apache”, “Makefile”, “Shell Script” のシンタックス定義を更新
    - シンタックス編集シートでの表記を「拡張子」(Extensions) から「ファイル関連付け」(File Mapping) に変更
- 「編集」に「行を選択」コマンドを追加
- 行番号をクリック／ドラッグして行を選択


### mod

- Yosemite スタイルの新しいアプリケーションアイコン
- 新しいデフォルトシンタックスカラーリング配色
- シンタックス定義で RE (正規表現) を無効にしていても IC (大文字小文字を無視) を有効にできるように変更
    - この仕様変更にともない、“Apache” のシンタックス定義を更新
- アウトライン抽出に用いる正規表現ライブラリを Oniguruma (OgreKit) から ICU (NSRegularExpression) に変更
    - 正規表現ライブラリの変更にともない、以下のシンタックス定義のアウトライン抽出定義を更新
        - “C, C++, Objective-C”, “CSS”, “Dart”, “Java”, “JavaScript”, “Perl”, “PHP”, “reStructuredText”, “Shell Script”
- アウトラインメニューでのタブ幅をスペース4個分に変更
- アウトライン抽出をバックグラウンドスレッドで行うように変更
    - これにより、巨大なファイルをオープンした際のカラーリングインジケータダイアログが出るまでのアプリケーション無反応時間を大幅に削減
    - 初回の抽出が終わるまではナビゲーションバーにスピンインジケータと抽出中である旨のメッセージを表示するようにした (2回目以降の更新時は表示をしない)
    - TODO: `$&` 定義の削除
- シンタックスカラーリングの抽出をバックグラウンドスレッドで行うように変更
- カラーリングインジケータダイアログの改良：
    - ダイアログに現在行なっている作業を表示するように改善
    - 途中でキャンセルした際に書類のシンタックス設定が「なし」にならないように変更
    - 途中でキャンセルした際に現在のカラーリングを破棄しないように変更
    - esc キーでもカラーリングをキャンセルできるように変更
- ページガイド線の生成方法を変更し、線は設定したテキストカラーと同色で描画されるようにした
- テキストカラーに不透明度を指定できるようにした
- シンタックスカラーリング抽出結果をキャッシュし、文書内容に変更がない場合は再カラーリング時にキャッシュを用いるようにした
- “XML” シンタックス定義の更新
    - 拡張子に “cottheme” を追加
- “LaTeX” シンタックス定義の更新
    - 拡張子に “cls”, “sty” を追加
    - アウトラインメニューの階層表示スタイルを変更
- ステータスバーおよび情報ドロワーの文字数カウントを composed character 単位に変更
    - 従来の文字数カウントは愚直にUTF-16 (= OS Xでの文字列内部表現) での length を表示するのに対して、新しいカウント法は表示される文字単位でカウントを行なう（例えば、絵文字などのサロゲートペアは文字数:1, 文字長:2となる）
    - 過去の「文字数」については「文字長」という名前に改名し「文字数」とは別に項目を設けた
- ダブルクリックでの単語選択時の区切り文字に `.` と `:` を追加
- 文書定義を増やし、CotEditorと関連づけられた書類のアイコンと種類がよりファイルを反映したものになるようにした
- 行番号の文字サイズがエディタの文字サイズに追従するように変更
- 行番号表示のパフォーマンスを大幅に改善 (約6倍)
- アプリケーションアイコンがフォルダのドラッグ&ドロップに反応しないように変更
- 「グリフ情報を表示」を「文字情報を表示」に改名
- メニューキーバインドのユーザ設定を保存するタイミングを設定を変更したときまで遅延し、カスタマイズしていないときは常にアプリケーションの現在のデフォルト値を用いるように変更
    - 以前のCotEditorのバージョンまででの設定をクリアするには環境設定のメニューキーバインド編集シートの「出荷時のデフォルトに戻す」を実行する必要があります
- 行間設定を行の高さ（行そのものを含む値）ベースに変更
- 行の高さのデフォルト値を 1.3 に変更
- 情報ドロワーの数値に桁区切り（カンマ）を入れるように変更
- 情報ドロワーの日時のフォーマットを変更
- シンタックスカラーリングでコメントと勘案してカラーリング処理をするクオート文字に `/`` を追加
- ステータスバーのトグルにアニメーション効果を追加
- エンコーディング編集シートの見た目を改良
- 環境設定のウインドウサイズ入力欄をタブキーで移動できるように改良
- 隠し設定であるナビゲーションバーのフォント設定を廃止した


### fix

- 不可視制御文字 Variation Selector の表示が消えることがある不具合を修正
- エンコーディングの順序を変更したときにツールバーの選択がリセットされる不具合を修正
- ステータスバーの情報がウインドウ幅からあふれるとき、左右の文字が重なっていたのを「…」で省略されるように修正
- ツールバーアイコンを後から追加したときに、追加されたアイコンがそのウインドウの状態を反映していない不具合を修正
- 非互換文字リストの空欄をクリックするとコンソールにエラーログが吐かれる不具合を修正
- ウインドウが開いた状態で環境設定からビューの不透明度を100%から下げると既出のウインドウの背景が透けない不具合を修正
- カスタム行間設定パネルからの入力が即座に反映されない不具合を修正
